# 反射

> 获取类的字节码的基础上解剖这个类

每段字节码均代表一个实现类，即：

* 代表字节码的类——`Class`
* 代表包的类——`Package`
* 代表属性的类——`Field`
* 代表方法的类——`Method`
    * 代表构造方法的类——`Constructor`
* 代表注解的类——`Annotation`

## 获取Class

1. 通过类名.class的方式类获取指定类的字节码
2. 通过对象.getClass的方式来获取对象对应的实际类的字节码
3. 通过Class.forName(类的全路径名)获取指定类的字节码
    * 要求此类提供**无参构造**
    * `getConstructor`只能获取`public`构造方法

* 类的权限修饰符对反射无效

## 注解

> 给程序看的注释，所有注解的父类是`Annotation`

* 基本类型
* `String`
* `class`
* `Enum`
* 其他注解
    * 以上类型对应的**一维数组**
        * 单元素直接赋值，多元素`{a,b,...,n}`
        * 当注解中只有一个属性且为`value`时可以省略属性名直接赋值
                    
### 元注解

> 修饰注解的注解

* `@Target`：限制注解使用范围
* `@Retention`：限制注解生命周期
* `@Documented`：限定注解使用时能否产生到文档中
* `@Inherited`：限定注解可以作用在子类上

## jvm参数

### 标准参数

* -d
* -ea

### 非标准参数

> 每个线程都有一个独立的栈，栈内存大小影响线程个数

> `JVM`限定栈内存总大小不能超过`2G`或者物理内存的$1/2$

* -x
	* -Xss(128k)
	* -Xmn：限定新生代大小
	* -Xms：限定堆内存初始大小
	* -Xmx：限定堆内存的最大值

### 常见回收方式

* `Copying`：复制法
* `Mark-sweeping`：标记整理法
* `Mark-cleaning`：标记清理法
