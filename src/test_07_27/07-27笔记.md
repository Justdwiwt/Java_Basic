# 套接字

进行网络数据传输的一套`API`，本质上是可以在网络上使用流

## 网络基本概念

### 七层模型

* 物理层
* 数据链路层
* 网络层
* 传输层
    * `UDP`
    * `TCP`
* 会话层
* 应用层
* 表示层
    * `HTTP`
    * `FTP`
    * `POP3`
    * `SMTP`

### IP地址

> 在网络中标记主机

* `IPv4`：四组数表示一个`IP`地址
    * 每组数取值范围：`0-255`
* `IPV6`：六组数表示一个`IP`地址

### 端口

> 计算机与外界交互的媒介

* 端口号：`0-65535`
    * `0-1024`被系统占用

### 域名

> 各个网站提供的便于记忆的标记

* 一级域名
    * 商业网站：`.com`
    * 政府网站：`.org`
    * 教育网站：`.edu`
* 二级域名
    * 具体名字
* 三级域名
    * 具体应用

### DNS

> 将域名和IP地址进行对应解析

* `127.0.0.1`表示本机地址

## UDP

> 基于流，传输时不建立连接，**不可靠**

* 传输数据时需要对数据进行**封包**
    * 每个包不超过`64k`
* 传输速度相对较快

## TCP

> 基于流，经历**三次握手**，**可靠**，传输速率较慢

### 三次握手

* 请求：建立连接/发送数据
    * 确认：可以建立连接/发送数据
* 再次确认：收到信息，准备连接/发送

* 客户端
    * Socket
        1. 创建客户端的套接字对象
        2. 发起连接，绑定连接地址
        3. 获取自带的输出流，写出数据，禁用输出流
        4. 如果服务器端有打回的数据，则需要获取输入流读取数据，禁用输入流
        5. 关流
* 服务器端
    * ServerSocket
        1. 创建服务器端的套接字对象，并且绑定监听的端口号
        2. 接受连接，获取到一个Socket对象
        3. 获取输入流，读取消息，禁用输入流
        4. 如果需要向客户端打回消息，则需要获取输出流写出数据，禁用输出流
        5. 关流

***

* `receive`、`connect`、`accept`、`write`、`read`都会产生**阻塞**
* `BIO`：`Blocking IO`——同步式阻塞式`IO`
* `NIO`：`New IO`——`NonBlocking IO`——`jdk1.4`——同步式非阻塞式`IO`
* `AIO`：`Asynchronous IO`——异步式非阻塞式`IO`——`jdk1.8`

***

## 可变参数

> `jdk1.5`特性之一，本质是**数组**

``` java
public static int add(int... is) {
    return Arrays.stream(is).sum();
}
```

* 一个方法中只能定义**一个**可变参数
* 只能定义在**参数列表末尾**

## 枚举

> 取值相对固定并且能够一一列举，所有枚举默认继承`java.lang.Enum`

* 构造方法默认`private`，可以**重载**
* 枚举常量必须定义在枚举类**首行**
* 枚举类中定义任意类型的方法和属性，包括抽象方法
* `jdk1.5`开始，`switch`中允许使用`Enum`
